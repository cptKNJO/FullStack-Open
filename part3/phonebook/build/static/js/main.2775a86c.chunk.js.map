{"version":3,"sources":["components/Notification.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Notification","successMessage","errorMessage","className","Filter","search","onChange","value","PersonForm","onSubmit","newName","handleNewName","newNumber","handleNewNumber","type","Person","name","number","deletePerson","onClick","Persons","persons","listNames","map","person","key","baseUrl","axios","get","then","response","data","personObject","post","id","delete","newObject","put","App","useState","setPersons","setNewName","setNewNumber","setSearch","setSuccessMessage","setErrorMessage","useEffect","personService","initialPersons","console","log","personsToShow","filter","toLowerCase","includes","event","target","preventDefault","matched","find","window","confirm","returnedPerson","p","setTimeout","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2775a86c.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Notification = ({ successMessage, errorMessage }) => {\n    if (successMessage !== null) {\n        return <div className=\"success\">{successMessage}</div>\n    }\n    if (errorMessage !== null) {\n        return <div className=\"error\">{errorMessage}</div>\n    }\n\n    return <div></div>\n}\n\nexport default Notification;","import React from \"react\";\n\nconst Filter = ({ search, onChange }) => {\n  return (\n    <div>\n      filter shown with <input value={search} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  onSubmit,\n  newName,\n  handleNewName,\n  newNumber,\n  handleNewNumber\n}) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input value={newName} onChange={handleNewName} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNewNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ name, number, deletePerson }) => (\n  <div>\n    {name} {number}\n    <button onClick={deletePerson}>delete</button>\n  </div>\n);\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\"\n\nconst Persons = ({ persons, deletePerson }) => {\n  const listNames = persons.map(person => (\n    <Person key={person.name} name={person.name} number={person.number} deletePerson={() => deletePerson(person)} />\n  ));\n\n  return <div>{listNames}</div>;\n};\n\nexport default Persons;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = personObject => {\n  const request = axios.post(baseUrl, personObject);\n  return request.then(response => response.data);\n};\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request;\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create, remove, update };\n","import React, { useState, useEffect } from \"react\";\nimport Notification from \"./components/Notification\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      console.log(initialPersons);\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const deletePerson = person => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService.remove(person.id).then(response => {\n        console.log(`Deleted ${person.name} from server`);\n        setPersons(persons.filter(p => p.id !== person.id));\n      });\n    }\n  };\n\n  const handleSearch = event => setSearch(event.target.value);\n\n  const personsToShow =\n    search === \"\"\n      ? persons\n      : persons.filter(person => {\n          if (person.name.toLowerCase().includes(search.toLowerCase())) {\n            return person;\n          }\n        });\n\n  const handleNewName = event => setNewName(event.target.value);\n  const handleNewNumber = event => setNewNumber(event.target.value);\n\n  const addName = event => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber\n    };\n\n    const matched = persons.find(person => person.name === newName);\n    if (matched) {\n      if (\n        window.confirm(\n          `${matched.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        personService\n          .update(matched.id, personObject)\n          .then(returnedPerson => {\n            console.log(returnedPerson);\n            setPersons(\n              persons.map(p => (p.id === matched.id ? returnedPerson : p))\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setSuccessMessage(`Updated ${matched.name}`);\n            setTimeout(() => {\n              setSuccessMessage(null);\n            }, 5000);\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Information of ${matched.name} has already been removed from the server`\n            );\n            setPersons(persons.filter(p => p.id !== matched.id));\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n    } else {\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          console.log(returnedPerson)\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setSuccessMessage(`Added ${returnedPerson.name}`);\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 5000);\n        })\n        .catch(error => {\n          console.log(error.response.data);\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n\n      <Filter search={search} onChange={handleSearch} />\n\n      <h3>Add a new</h3>\n      <PersonForm\n        onSubmit={addName}\n        newName={newName}\n        handleNewName={handleNewName}\n        newNumber={newNumber}\n        handleNewNumber={handleNewNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}